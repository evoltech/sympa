How to upgrade scenari files between releases
---------------------------------------------

* Copy the new scenari files from the upstream source tree into a new
    upstream directory

   cp .../sympa-###/src/etc/scenari/* upstream-###

* Run "prepscenari" to create a new scenari directory based on the upstream

   ./prepscenari upstream-### new

This script prepares the new directory to be like we like it.

* diff the new version with our current scenari directory

   diff -urN new etc >diff

This creates a patch that, if applied to the new copy, would convert it
to our existing version. (Which would be pointless, until we edit below)

* Review the diff and for each change decide what to do.
 A.) For changes to files or added files that _we_ added (+'s in the diff),
     if we want keep it, do nothing (leaving it in etc and the diff) and
     we'll apply it below. If we don't want it, edit the etc/ copy to
     remove that change.
 B.) For changes to files that _upstream_ added (-'s in the diff), if
     we want to keep it edit in etc/. If we don't want it do nothing
     (leaving in new and the diff) and we'll apply it below.
 C.) For whole files in upstream that aren't in our copy (either because
     they are new, or because we removed them) (these are also -'s in the
     diff, but being compared to a non-existant file), if we want to delete
     them edit prepscenari to add them to the delete list. If we don't want
     to delete them, copy the file into etc/.

* Repeat the previous 3 steps until you are happy with the diff.

* Apply the diff to the new/ dir.

  cd new/; cat ../diff |patch -p1

* Replace the etc/ dir with the new/ dir.

  mv etc etc.old; mv new etc

* Run git diff and review the diff to make sure it looks ok

  git diff etc

* If you are happy with it, add/commit it

  git add etc; git commit etc; git push



-- 
Matt Taggart <taggart@riseup.net> 2011-12
