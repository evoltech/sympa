--- src/lib/List.pm
+++ src/lib/List.pm
@@ -7172,6 +7178,7 @@
 
     my $statement_subscriber;
     my $statement_admin;
+    my $statement_list_cache;
     
     ## Check database connection
     unless ($dbh and $dbh->ping) {
@@ -9820,6 +9842,7 @@
     my $robot_context = shift || '*';
     my $options = shift;
     my $requested_lists = shift; ## Optional parameter to load only a subset of all lists
+    my $use_files = shift;
 
     my(@lists, $l,@robots);
     do_log('debug2', 'List::get_lists(%s)',$robot_context);
@@ -9855,7 +9878,13 @@
 	    if ( defined($requested_lists)){
 	      @files = sort @{$requested_lists};
 	    }else {
-	      @files = sort readdir(DIR);
+              if ($use_files) {
+	        @files = sort readdir(DIR);
+              }else {
+                # get list names from list config table
+                my $files = &get_lists_db('SELECT name_list FROM list_table');
+                @files = @{$files};
+              }
 	    }
 
 	    foreach my $l (@files) {
